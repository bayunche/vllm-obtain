# VLLM 跨平台推理服务 - Windows 依赖文件
# 支持 NVIDIA GPU (CUDA) 和 CPU 推理

# 核心框架
flask==3.1.2
flask-cors==6.0.1
gunicorn==23.0.0  # Windows下可能需要 waitress 替代
waitress==3.0.2   # Windows推荐WSGI服务器
gevent==25.5.1

# llama.cpp 推理引擎 (Windows主要选择)
llama-cpp-python>=0.3.0

# PyTorch (支持CUDA)
torch>=2.0.0
torchvision>=0.15.0
torchaudio>=2.0.0
# 注意: Windows需要安装支持CUDA的PyTorch版本
# pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# 配置和环境
python-dotenv==1.0.1
pydantic==2.10.6
pydantic-settings==2.7.3

# 日志系统
loguru==0.7.3

# 系统监控
psutil==6.2.1
wmi==1.5.1  # Windows管理接口
pywin32==308  # Windows API

# HTTP客户端
requests==2.32.3
httpx==0.28.0
aiohttp==3.12.15

# 数据处理
numpy>=1.24.0
tokenizers>=0.20.0
transformers>=4.45.0
sentencepiece>=0.2.0

# HuggingFace集成
huggingface-hub>=0.26.0

# 异步支持
asyncio-mqtt==0.14.1
anyio==4.10.0

# 测试工具
pytest==8.3.4
pytest-asyncio==0.24.0
pytest-benchmark==4.0.0

# 开发工具
black==24.10.0
isort==5.13.2
mypy==1.14.0

# Windows服务管理
pywin32-ctypes==0.2.3
python-windows-service==1.0.1

# 可选: Redis for Windows (缓存)
# redis==5.2.1

# Windows 特定注意事项:
# 1. 需要安装 Visual Studio Build Tools 或 Visual Studio Community
# 2. 推荐使用 Anaconda 或 Miniconda 管理Python环境
# 3. CUDA支持: 需要安装 NVIDIA CUDA Toolkit 11.8+
# 4. 某些包可能需要预编译wheel，从 https://www.lfd.uci.edu/~gohlke/pythonlibs/ 下载
# 5. 推荐使用 PowerShell 或 Windows Terminal 运行
# 6. 防病毒软件可能会影响性能，建议添加项目目录到白名单

# Windows 安装命令示例:
# pip install -r requirements-windows.txt
# 或者分步安装避免依赖冲突:
# pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
# pip install -r requirements-windows.txt --no-deps
# pip install -r requirements-windows.txt